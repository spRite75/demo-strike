overwrite: true
schema: "packages/server/schema.graphql"
documents: "packages/client/src/**/*.graphql"
generates:
  # Client Code
  packages/client/src/generated/graphql.tsx:
    plugins:
      - "typescript"
      - "typescript-operations"
      - "typescript-react-apollo"
      - "fragment-matcher"
    config:
      scalars:
        DateTime: string
  packages/client/src/generated/graphql.schema.json:
    plugins:
      - "introspection"

  # GraphQL Server Code
  packages/server/src/graphql/generated/graphql.ts:
    plugins:
      - "typescript"
      - "typescript-resolvers"
      - add:
          content: "import { GqlMapper } from '../../utils';"
    config:
      contextType: ../context#Context
      useIndexSignature: true
      defaultMapper: GqlMapper<{T}>
      scalars:
        DateTime: luxon#DateTime
  packages/server/src/graphql/generated/graphql.schema.json:
    plugins:
      - "introspection"
